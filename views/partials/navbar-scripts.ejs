<script>
    // Manejo del sidebar en móviles
    document.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.querySelector('.sidebar');
        if (!sidebar) return;

        // Tooltips Bootstrap (para mostrar texto al pasar el ratón cuando el navbar está en modo iconos)
        try {
            if (typeof bootstrap !== 'undefined' && bootstrap.Tooltip) {
                const tooltipTriggers = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                tooltipTriggers.forEach((el) => {
                    // Evitar duplicados si algún template re-ejecuta
                    if (!bootstrap.Tooltip.getInstance(el)) {
                        new bootstrap.Tooltip(el, { trigger: 'hover focus', boundary: 'window' });
                    }
                });
            }
        } catch (_) {}
        
        const sidebarOverlay = document.createElement('div');
        sidebarOverlay.className = 'sidebar-overlay';
        document.body.appendChild(sidebarOverlay);
        
        // Función para abrir/cerrar sidebar en móviles
        function toggleSidebar() {
            if (window.innerWidth <= 767) {
                sidebar.classList.toggle('show');
                sidebarOverlay.classList.toggle('show');
            }
        }
        
        // Agregar evento al botón de toggle del sidebar
        const sidebarToggle = document.getElementById('sidebarToggle');
        if (sidebarToggle) {
            sidebarToggle.addEventListener('click', function(e) {
                e.preventDefault();
                toggleSidebar();
            });
        }
        
        // Cerrar sidebar al hacer clic en el overlay
        sidebarOverlay.addEventListener('click', function() {
            sidebar.classList.remove('show');
            sidebarOverlay.classList.remove('show');
        });
        
        // Cerrar sidebar al hacer clic en un enlace del sidebar en móviles
        const sidebarLinks = sidebar.querySelectorAll('a');
        sidebarLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 767) {
                    sidebar.classList.remove('show');
                    sidebarOverlay.classList.remove('show');
                }
            });
        });
        
        // Ajustar sidebar al redimensionar ventana
        window.addEventListener('resize', function() {
            if (window.innerWidth > 767) {
                sidebar.classList.remove('show');
                sidebarOverlay.classList.remove('show');
            }
        });
    });
</script>
<script src="/js/notifications.js"></script>

